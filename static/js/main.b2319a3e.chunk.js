(this.webpackJsonptable=this.webpackJsonptable||[]).push([[0],{46:function(e,t,a){e.exports=a.p+"static/media/user.4e76d415.png"},52:function(e,t,a){e.exports=a(88)},57:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(8),r=a.n(o),l=(a(57),a(21)),u=a(45),i=a(4),s=a(48),m=Object(n.createContext)(),d=a(46),f=a.n(d),b=function(e){var t=e.saveRow,a=e.active;return c.a.createElement("div",{className:"header"},c.a.createElement("button",{className:"btn",onClick:function(){a?t():alert("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u0443")}},"Save"),c.a.createElement("img",{className:"logo",src:f.a,alt:"user"}))},p=function(e){var t=[];return"date"===e.column.data.toLowerCase()&&t.push("date-td"),c.a.createElement("th",{className:"".concat(t.join(""))},e.column.data)},g=function(e){var t=e.td,a=t.data,o=t.is_mutable,r=Object(n.useContext)(m),l=[],u=[],s=Object(n.useState)(""),d=Object(i.a)(s,2),f=d[0],b=d[1],p=Object(n.useState)(!1),g=Object(i.a)(p,2),h=g[0],v=g[1];return Object(n.useEffect)((function(){b(a)}),[a]),o&&h&&(l.push("td_picker"),u.push("for-string")),c.a.createElement("td",{className:"".concat(l.join("")),onClick:function(){!function(){if(!r.disabled)o&&v(!0)}(),r.forDisabled()}},!0!==o&&!1!==o||!1!==h?c.a.createElement("input",{type:"text",className:"".concat(u.join("")),style:{boxShadow:"0px 0px 5px 1px blue",position:"absolute",width:"98%",height:"96%",fontSize:"17px",border:"none",outline:"none",textAlign:"center",top:"".concat(0,"px"),left:"".concat(0,"px"),bottom:"".concat(0,"px"),right:"".concat(0,"px")},onChange:function(e){b(e.target.value)},value:f,onBlur:function(){v(!1),r.changeStatus(t.row,t.column,t.type,f)},onMouseEnter:function(e){e.target.focus()}}):f)},h=a(119),v=a(123),j=Object(h.a)((function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:140}}})),E=function(e){var t=e.td,a=t.data,o=t.is_mutable,r=Object(n.useContext)(m),l=[],u=[],s=Object(n.useState)(0),d=Object(i.a)(s,2),f=d[0],b=d[1],p=Object(n.useState)(!1),g=Object(i.a)(p,2),h=g[0],E=g[1],w=j();return Object(n.useEffect)((function(){var e=function(e){var t=new Date(e),a=t.getDate(),n=t.getMonth(),c=t.getFullYear();return a<10&&(a="0"+a),n<9?n="0"+(n+1):n+=1,"".concat(c,"-").concat(n,"-").concat(a)}(a);b(e)}),[a]),o&&h&&(l.push("td_picker"),u.push("for-calendar")),c.a.createElement("td",{className:"".concat(l.join("")),onClick:function(){o&&E(!0)}},!0!==o&&!1!==o||!1!==h?c.a.createElement("form",{className:"".concat(w.container," ").concat(u.join("")),noValidate:!0,onMouseEnter:function(e){var t;"INPUT"!==(t=e.target).tagName?t.querySelector("input").focus():t.focus()}},c.a.createElement(v.a,{id:"date",label:"Choose date",type:"date",defaultValue:f,className:w.textField,InputLabelProps:{shrink:!0},onChange:function(e){b(e.target.value),E(!1),r.changeStatus(t.row,t.column,t.type,e.target.value)},onBlur:function(){E(!1)}})):f)},w=function(e){var t=e.td,a=t.data,o=t.is_mutable,r=Object(n.useContext)(m),l=[],u=[],s=Object(n.useState)(""),d=Object(i.a)(s,2),f=d[0],b=d[1],p=Object(n.useState)(!1),g=Object(i.a)(p,2),h=g[0],v=g[1];return Object(n.useEffect)((function(){b(a)}),[a]),o&&h&&(l.push("td_picker"),u.push("for-number")),c.a.createElement("td",{className:"".concat(l.join("")),onClick:function(){!function(){if(!r.disabled)o&&v(!0)}(),r.forDisabled()}},!0!==o&&!1!==o||!1!==h?c.a.createElement("input",{type:"text",className:"".concat(u.join("")),style:{boxShadow:"0px 0px 5px 1px blue",position:"absolute",width:"98%",height:"96%",fontSize:"17px",border:"none",outline:"none",textAlign:"center",top:"".concat(0,"px"),left:"".concat(0,"px"),bottom:"".concat(0,"px"),right:"".concat(0,"px")},onChange:function(e){b(e.target.value)},value:f,onBlur:function(){v(!1),r.changeStatus(t.row,t.column,t.type,f)},onMouseEnter:function(e){e.target.focus()}}):f)},O=function(e){var t=e.td,a=Object(n.useContext)(m);return c.a.createElement("td",null,c.a.createElement("label",{htmlFor:"for".concat(t.row).concat(t.column),className:"for-status ".concat(t.data?"checked":"unchecked")},c.a.createElement("input",{type:"checkbox",className:"checkbox",defaultChecked:t.data,id:"for".concat(t.row).concat(t.column),onClick:function(){a.changeStatus(t.row,t.column,t.type,null)}})))},x=function(e){return c.a.createElement("tr",null,e.row.map((function(e,t){return"string"===e.type?c.a.createElement(g,{td:e,key:t}):"datetime"===e.type?c.a.createElement(E,{td:e,key:t}):"number"===e.type?c.a.createElement(w,{td:e,key:t}):"boolean"===e.type?c.a.createElement(O,{td:e,key:t}):null})))},y=function(e){var t=e.rows,a=Object(n.useContext)(m),o=a.tableName,r=a.titles,l=a.loading,u=(a.sorted,a.sortRows,a.returnPreviousState);if(!l)return c.a.createElement("main",{className:"table"},0!==t.length?c.a.createElement("div",null,c.a.createElement("h1",{className:"name"},o),c.a.createElement("table",{className:"test-table"},c.a.createElement("tbody",null,c.a.createElement("tr",null,r.map((function(e){return c.a.createElement(p,{column:e,key:"".concat(e.row).concat(e.column)})}))),t.map((function(e,t){return c.a.createElement(x,{row:e,key:t})}))))):c.a.createElement("div",{className:"return"},c.a.createElement("p",null,"No data requested"),c.a.createElement("button",{onClick:function(){u()}},"Return")))},N=function(){return c.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:".5rem"}},c.a.createElement("div",{className:"lds-dual-ring"}))},S=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],o=t[1],r=Object(n.useContext)(m);return c.a.createElement("div",{className:"for-search"},c.a.createElement("div",{className:"search-box"},c.a.createElement("input",{type:"search",value:a,onChange:function(e){o(e.target.value),""===e.target.value&&r.returnPreviousState()},placeholder:"search..."}),c.a.createElement("button",{className:"btn",onClick:function(){r.findRows(a)}})))},k=function(e){var t=e.showForm;return c.a.createElement("button",{className:"add-row",onClick:function(){t("open")}},"AddRow")},C=function(e){var t=e.title,a=e.index,o=Object(n.useContext)(m),r=o.saveNewUser,l=o.removeWarning,u=o.errors,s=Object(n.useState)(""),d=Object(i.a)(s,2),f=d[0],b=d[1];return c.a.createElement("div",{className:"input-group"},c.a.createElement("label",null,t.data,":"),c.a.createElement("input",{className:"".concat(f),type:"text",name:t.data,"data-type":"string","data-number":a,placeholder:"".concat(t.data),onChange:function(e){r(e.target,e.target.dataset.number,e.target.dataset.type),b(u[t.data].length?"attention":""),l()}}),""!==u[t.data]?c.a.createElement("label",{className:"uncorrect"},u[t.data]):null)},D=function(e){var t=e.title,a=e.index,o=Object(n.useContext)(m),r=o.saveNewUser,l=o.removeWarning,u=o.errors,s=Object(n.useState)(""),d=Object(i.a)(s,2),f=d[0],b=d[1];return c.a.createElement("div",{className:"input-group"},c.a.createElement("label",null,t.data,":"),c.a.createElement("input",{className:"".concat(f),type:"text",name:t.data,"data-type":"boolean","data-number":a,placeholder:"".concat(t.data," + / -"),onChange:function(e){r(e.target,e.target.dataset.number,e.target.dataset.type),b(u[t.data].length?"attention":""),l()}}),""!==u[t.data]?c.a.createElement("label",{className:"uncorrect"},u[t.data]):null)},P=function(e){var t=e.title,a=e.index,o=Object(n.useContext)(m),r=o.saveNewUser,l=o.removeWarning,u=o.errors,s=Object(n.useState)(""),d=Object(i.a)(s,2),f=d[0],b=d[1];return c.a.createElement("div",{className:"input-group"},c.a.createElement("label",null,t.data,":"),c.a.createElement("input",{className:"".concat(f),type:"text",name:t.data,"data-type":"number","data-number":a,placeholder:"".concat(t.data),onChange:function(e){r(e.target,e.target.dataset.number,e.target.dataset.type),b(u[t.data].length?"attention":""),l()}}),""!==u[t.data]?c.a.createElement("label",{className:"uncorrect"},u[t.data]):null)},R=function(e){var t=e.title,a=e.index,o=Object(n.useContext)(m),r=o.saveNewUser,l=o.removeWarning,u=o.errors,s=Object(n.useState)(""),d=Object(i.a)(s,2),f=d[0],b=d[1];return c.a.createElement("div",{className:"input-group"},c.a.createElement("label",null,t.data,":"),c.a.createElement("input",{className:"".concat(f),type:"text",name:t.data,"data-type":"date","data-number":a,placeholder:"".concat(t.data,": yyyy-mm-dd"),onChange:function(e){r(e.target,e.target.dataset.number,e.target.dataset.type),b(u[t.data].length?"attention":""),l()}}),""!==u[t.data]?c.a.createElement("label",{className:"uncorrect"},u[t.data]):null)},F=function(e){var t=e.showForm,a=Object(n.useContext)(m),o=a.titles,r=a.warning,l=a.removeWarning,u=a.closeForm,i=[];return r&&i.push("red"),c.a.createElement("form",{className:"new-user ".concat(i.join("")),onSubmit:function(e){e.preventDefault(),t("close"),l()}},r?c.a.createElement("p",{className:"form-warning"},"Please , fill in the form correctly !!!"):"",o.map((function(e,t){return"Active"===e.data?c.a.createElement(D,{title:e,index:t,key:t}):"Date"===e.data?c.a.createElement(R,{title:e,index:t,key:t}):"Age"===e.data?c.a.createElement(P,{title:e,index:t,key:t}):c.a.createElement(C,{title:e,index:t,key:t})})),c.a.createElement("button",{className:"close-modal",onClick:function(){u()}},"Close"))},_=a(24),M=a(33),W=a.n(M),B=RegExp(Object(s.a)(/([0-9]{4})\x2D([0-9]{2})\x2D([0-9]{2})/g,{year:1,month:2,day:3})),L=RegExp(/[-+]{1}/g),A=RegExp(/[0-9]{2}/g);var I=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)([]),s=Object(i.a)(r,2),d=s[0],f=s[1],p=Object(n.useState)(!0),g=Object(i.a)(p,2),h=g[0],v=g[1],j=Object(n.useState)([]),E=Object(i.a)(j,2),w=E[0],O=E[1],x=Object(n.useState)(!1),C=Object(i.a)(x,2),D=C[0],P=C[1],R=Object(n.useState)(!1),M=Object(i.a)(R,2),I=M[0],U=M[1],z=Object(n.useState)([]),q=Object(i.a)(z,2),V=q[0],Y=q[1],J=Object(n.useState)([]),K=Object(i.a)(J,2),Q=K[0],G=K[1],T=Object(n.useState)(!1),$=Object(i.a)(T,2),H=$[0],X=$[1],Z=Object(n.useState)([]),ee=Object(i.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(n.useState)({}),ce=Object(i.a)(ne,2),oe=ce[0],re=ce[1],le=Object(n.useState)(!1),ue=Object(i.a)(le,2),ie=ue[0],se=ue[1];function me(e,t){t&&O(w=[]);var a=1,n=[];return e.cells.map((function(e){a===d.length?(n.push(e),w.push(n),a=1,n=[]):(n.push(e),a++)})),w}function de(e,t){new Promise((function(e,t){e(_.database())})).then((function(e){return new Promise((function(e){e(W.a.get("https://test-table-9a0f5.firebaseio.com/data.json"))}))})).then((function(a){return"boolean"===t?new Promise((function(t){e.map((function(e){e.map((function(e){a.data.cells.map((function(t){"boolean"===e.type&&e.row===t.row&&e.column===t.column&&(t.data=e.data)}))}))})),t(a.data)})):"addRow"===t?new Promise((function(t){e[w.length-1].map((function(e){"datetime"===e.type&&(e.data=new Date(e.data)),a.data.cells.push(e)})),t(a.data)})):"string"===t||"number"===t||"datetime"===t?new Promise((function(t){e.map((function(e){e.map((function(e){a.data.cells.map((function(t){e.row===t.row&&e.column===t.column&&("number"===e.type?t.data=+e.data:t.data=e.data)}))}))})),t(a.data)})):void 0})).then((function(e){return new Promise((function(t){t(W.a.patch("https://test-table-9a0f5.firebaseio.com/data.json",Object(u.a)({},e)))}))})).then((function(e){return me(e.data,!0)})).then((function(e){D?(e.map((function(e){V.map((function(t){e.column===t.column&&e.row===t.row&&(t.data=e.data)}))})),G(e),Y(V),O([].concat(V))):O([].concat(e))})).then((function(){U(!1)})).catch((function(e){throw new Error(e)}))}function fe(e){return e<10?"0"+e:e}function be(e){X("open"===e)}return Object(n.useEffect)((function(){new Promise((function(e,t){e(_.database())})).then((function(e){return new Promise((function(t,a){e.ref("data").on("value",(function(a){d=a.val().header_cells,f(d),t(e)}))}))})).then((function(e){return new Promise((function(t,a){e.ref("data").on("value",(function(e){var t=e.val();w=me(t,!1)})),O(w),t(e)}))})).then((function(e){return new Promise((function(t,n){e.ref("data").on("value",(function(n){a=n.val(),o(a.table_name),t(e)}))}))})).then((function(){v(!1)}))}),[]),c.a.createElement(m.Provider,{value:{tableName:a,titles:d,warning:ie,sorted:D,sortRows:V,errors:oe,disabled:I,removeWarning:function(){ie&&se(ie=!1)},changeStatus:function(e,t,a,n){w.map((function(c,o){return c.map((function(c){return"boolean"===a?"boolean"===c.type&&c.row===e&&c.column===t&&(c.data=!c.data):"number"===a||"string"===a?c.row===e&&c.column===t&&(c.data=n):"datetime"===a&&c.row===e&&c.column===t&&(c.data=new Date(n)),c})),c})),de(w,a)},findRows:function(e){G((function(e){return w}));var t=[];w.map((function(a){a.map((function(n){var c,o;if("datetime"===n.type){var r,l=new Date(n.data);["/",".","-"].map((function(t){var a=e.split("".concat(t));3===a.length&&(4===a[2].length?r=a.reverse().join("-"):4===a[0].length&&(r=a.join("-")))})),r=new Date("".concat(r)),c="".concat(l.getFullYear(),"-").concat(l.getMonth(),"-").concat(fe(l.getDate())),o="".concat(r.getFullYear(),"-").concat(r.getMonth(),"-").concat(fe(r.getDate()))}else c=n.data.toString().toLowerCase(),o=e.toString().toLowerCase();c===o&&t.push(a)}))})),Y([].concat(t)),O((function(e){return[].concat(t)})),P(!0)},saveNewUser:function(e,t,a){var n=e.name,c=e.value;switch(te[t]?te[t]&&(te[t]=Object(l.a)({},n,c)):te.push(Object(l.a)({},n,c)),ae(te),a){case"string":oe[n]=c.length<3&&c.length>0?"Minimum three characaters required":"";break;case"date":oe[n]=B.test(c)&&c.length>0?"":"invalid date format";break;case"boolean":oe[n]=L.test(c)&&c.length>0?"":"choose + or - ";break;case"number":oe[n]=A.test(c)&&c.length>0?"":"indicate your age"}re(oe)},returnPreviousState:function(){O(Q),P(!1)},forDisabled:function(){U(!0)},closeForm:function(){re({})}}},c.a.createElement("div",{className:"container"},c.a.createElement(b,{active:H,saveRow:function(){if(function(){var e=0;return Object.values(oe).map((function(t){""===t?e++:e--})),e===d.length}()){for(var e=0,t=[];e<=d.length-1;){var a={};for(var n in Object.assign(a,w[w.length-1][e]),te[e])"boolean"===a.type?"+"===te[e][n]?a.data=!0:a.data=!1:"datetime"===a.type?a.data=new Date(te[e][n]):a.data=te[e][n],a.row=w[w.length-1][e].row+1;t.push(a),e++}w.push(t),O(w),X(!1),ae([]),de(w,"addRow")}else se(!0)}}),c.a.createElement(S,null),h&&c.a.createElement(N,null),!0!==h?c.a.createElement(y,{rows:w}):c.a.createElement("p",{className:"loading"},"Loading..."),!1===H?c.a.createElement(k,{showForm:be}):c.a.createElement(F,{showForm:be})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(87);_.initializeApp({apiKey:"AIzaSyBBK5Gjt_6SvuDxrL8797cVMN2_0QdnmlQ",authDomain:"test-table-9a0f5.firebaseapp.com",databaseURL:"https://test-table-9a0f5.firebaseio.com",projectId:"test-table-9a0f5",storageBucket:"test-table-9a0f5.appspot.com",messagingSenderId:"675293196431",appId:"1:675293196431:web:e06385934dd4f4ca7480fa"}),r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[52,1,2]]]);
//# sourceMappingURL=main.b2319a3e.chunk.js.map